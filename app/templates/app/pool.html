{% extends "app/layout.html" %}

{% block content %}

<h1 style="margin-top:0;">Обратная связь</h1>
<p class="text-muted" style="margin-top:-6px;">
    Оцените сайт ArtSisters и оставьте пожелания — это помогает нам становиться лучше.
</p>

<div class="row" style="margin-top:18px;">
    <div class="col-md-8 col-md-offset-2">

        <div class="panel panel-default" style="border-radius:16px;">
            <div class="panel-body" style="padding:26px 26px;">

                <h3 style="margin-top:0; font-weight:700;">Оставить отзыв</h3>

                <form method="post" novalidate>
                    {% csrf_token %}

                    <div class="form-group">
                        {{ form.name.label_tag }}
                        {{ form.name }}
                    </div>

                    <div class="form-group">
                        {{ form.email.label_tag }}
                        {{ form.email }}
                    </div>

                    <div class="form-group">
                        {{ form.rating.label_tag }}
                        {{ form.rating }}
                    </div>

                    <div class="form-group">
                        <label>{{ form.design.label }}</label>
                        <div style="margin-top:6px;">{{ form.design }}</div>
                    </div>

                    <div class="form-group">
                        <label>{{ form.features.label }}</label>
                        <div style="margin-top:6px;">{{ form.features }}</div>
                    </div>

                    <div class="form-group">
                        {{ form.topic.label_tag }}
                        {{ form.topic }}
                    </div>

                    <div class="form-group">
                        {{ form.comment.label_tag }}
                        {{ form.comment }}
                    </div>

                    <button type="submit" class="btn btn-primary">
                        Отправить отзыв <i class="fa-solid fa-paper-plane"></i>
                    </button>
                </form>

            </div>
        </div>

        <hr class="soft-hr" />

        <h2 class="text-center" style="margin-top:0;">Отзывы</h2>
        <p class="text-center text-muted" style="margin-top:-10px; margin-bottom:18px;">
            Последние отзывы пользователей
        </p>

        {% if reviews %}
        {% for r in reviews %}
        <div class="panel panel-default" style="border-radius:16px;">
            <div class="panel-body" style="padding:18px 18px;">
                <div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;">
                    <div style="font-weight:700;">{{ r.name }}</div>
                    <div class="text-muted" style="font-size:13px;">
                        {{ r.created }}
                    </div>
                </div>

                <div style="margin-top:6px;" class="text-muted">
                    Оценка: <strong style="color:#1f2937;">{{ r.rating }}/10</strong>
                    &nbsp;•&nbsp;
                    Оформление: <strong style="color:#1f2937;">{{ r.design }}</strong>
                </div>

                {% if r.features %}
                <div class="text-muted" style="margin-top:6px; font-size:13px;">
                    Понравилось: {{ r.features }}
                </div>
                {% endif %}

                <div style="margin-top:10px;">
                    {{ r.comment|linebreaksbr }}
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p class="text-center text-muted">Пока нет отзывов. Будьте первым 🙂</p>
        {% endif %}

    </div>
</div>

{% endblock %}
